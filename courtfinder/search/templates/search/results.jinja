{% extends "layout/base.jinja" %}
{% block page_title %}Find a court or tribunal{% endblock %}

{% block content %}
<div class="content inner cf">
  <header class="page-header">
    <h1>Find a court or tribunal</h1>
  </header>
</div>
<form method="get" action="results">
  <fieldset>
    {% if query %}
        <label for="postcode" class="form-block">
          <div class="form-label-bold">Search by name or address</div>
          <div class="form-hint">Enter part of the court or tribunal name or address.</div>
          <input class="form-control" type="text" name="q" />
        </label>
    {% else %}
        <label for="postcode" class="form-block">
          <div class="form-label-bold">Search results for postcode</div>
          <input type="text" name="postcode" value="{{ postcode }}"/>
        </label>
        <label for="area_of_law" class="form-block">
          <div class="form-label-bold">Filtered by courts or tribunals dealing with</div>
          <select name="area_of_law" id="area_of_law">
            {% for aol in areas_of_law %}
            <option value="{{aol.name}}" class="block-label form-block" {% if aol.name == area_of_law %}selected=selected{% endif %}>{{ aol.name }}</option>
            {% endfor %}
          </select>
        </label>
      {% endif %}
      <div class="actions">
        <button id="again" class="button" type="submit">Search again</button>
      </div>
  </fieldset>
</form>

{% if search_results %}
  <p>{{ search_results|length }} results</p>
  <hr/>
  <ul>
    {% for court in search_results %}
    <li>
      <div><a href="https://courttribunalfinder.service.gov.uk/courts/{{ court.slug }}">{{ court.name }}</a></div>
      <ul>
      {% for address in court.addresses %}
        <li>
          <h3>{{ address.type }}</h3>
          {% for line in address.address %}
          <p>{{ line }}</p>
          {% endfor %}
        </li>
      {% endfor %}
      </ul>
    </li>
    {% endfor %}
  </ul>

  {% endif %}

{% endblock %}
