{% extends "layout/base.jinja" %}
{% load static %}

{% block page_title %}Find a court or tribunal{% endblock %}

{% block content %}
<div id="global-breadcrumb" class="header-context">
  <ol role="breadcrumbs" class="group">
    <li><a href="/">Home</a></li>
    <li><a href="/search">Find a court or tribunal</a></li>
    {% if query %}
    <li><a href="/search/address">Search by name or address</a></li>
    {% else %}
    <li><a href="/search/postcode">Search by postcode</a></li>
    {% endif %}
  </ol>
</div>
<div class="content inner cf">
  <header class="page-header">
    <h1>Search results</h1>
  </header>

  {% if search_results %}
  <div class="search-results">
    {% if query %}
    <p class="text-secondary">
      <span id="number-of-results">{{ search_results|length }}</span> result{{ search_results|length|pluralize }}
    </p>
    {% else %}
      {% if search_results|length == 1 %}
    <p>This is the court or tribunal nearest {{ postcode }}.</p>
      {% else %}
    <p>These are the <span id="number-of-results">{{ search_results|length }}</span> courts or tribunals nearest {{ postcode }}.</p>
      {% endif %}
      {% if in_scotland %}
    <p id="scotland"><em>This tool shows courts and tribunals in England and Wales, and some tribunals in Scotland and Northern Ireland.</em></p>
      {% endif %}
    {% endif %}
    <hr/>
    <ul id='court-results'>
      {% for court in search_results %}
      <li>
        <h2>{{ court.name }}</h2>
        <div class="court-addresses">
          <p>
            <span class="court-result-heading">Write to us:</span><br/>
            {% with a=court.address %}
            <span class="court-address">
            {% for line in a.address_lines %}
              {% if line != "" %}
                {{ line }}<br/>
              {% endif %}
              {% endfor %}
            </span>
            <span class="court-town">{{a.town}}</span><br/>
            <span class="court-postcode">{{a.postcode}}</span>
            {% endwith %}
          </p>

          <p>
            {% if court.dx_number %}
              <span class="court-result-heading">DX:</span> <span>{{ court.dx_number }}</span><br/>
            {% endif %}
            {% if court.number %}
              <span class="court-result-heading">Court number:</span> <span>{{ court.number }}</span>
            {% endif %}
          </p>
        </div>
        <div class="court-aol">
          <p class="court-result-heading">Areas of law covered:</p>
          <ul>
          {% for aol in court.areas_of_law %}
            <li>{{ aol.name }}</li>
          {% endfor %}
          </ul>
        </div>
        <div class="court-map">
          <div class="court-map-top">
            <p class="court-result-heading">Find us here:</p>
            {% if court.distance %}
            <p class="distance-from-postcode">{{ court.distance }} miles away</p>
            {% endif %}
          </div>
          <p>
            {% if court.lat != None and court.lon != None %}
            <a target="_blank" href="https://maps.google.com/maps?q={{court.lat}},{{court.lon}}">
              <img src="http://maps.googleapis.com/maps/api/staticmap?size=290x235&zoom=15&markers={{court.lat}},{{court.lon}}&key=AIzaSyC_b504UmVatMNUg1HCmbyuXoJ8meK6lpA" alt="location of the court on a map"/>
            </a>
          {% else %}
            <a target="_blank" href="https://maps.google.com/maps?q={{ court.address.postcode }}+{{ court.address.town }}+UK">
              <img src="http://maps.googleapis.com/maps/api/staticmap?size=290x235&zoom=15&markers={{ court.address.postcode }}+{{ court.address.town }}+UK&key=AIzaSyC_b504UmVatMNUg1HCmbyuXoJ8meK6lpA" alt="location of the court on a map"/>
            </a>
            <br/>
          {% endif %}
        </div>
        <p class="clear">
          <a href="https://courttribunalfinder.service.gov.uk/courts/{{ court.slug }}">More details about {{ court.name }}</a></p>
        </p>
        <hr class="clear"/>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}
</div>
{% endblock %}
{% block javascripts %}
    <script src='{% static "javascripts/application.js" %}'></script>
{% endblock %}
